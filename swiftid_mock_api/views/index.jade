//- Copyright 2016 Capital One Services, LLC
//- 
//- Licensed under the Apache License, Version 2.0 (the "License");
//- you may not use this file except in compliance with the License.
//- You may obtain a copy of the License at
//- 
//-     http://www.apache.org/licenses/LICENSE-2.0
//- 
//- Unless required by applicable law or agreed to in writing, software
//- distributed under the License is distributed on an "AS IS" BASIS,
//- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//- See the License for the specific language governing permissions and limitations under the License.


extends layout

block content
  h1 Open Tasks

  table
    thead
      tr
        th Webhook Validation Id
        th Access Token
        th Client App
        th Action
        th Requestor Name
        th Status
        th Expiration Timestamp
    tbody
      each task, index in tasks
        tr
          td= task.webhookValidationId
          td= task.accessToken
          td= task.message.clientApp
          td= task.message.action
          td= task.message.requestorName
          td= task.status
          td= task.expirationTimestamp
          td
            form(action="/#{task._id}/approve" method="POST")
              button(type="submit") Approve
          td
            form(action="/#{task._id}/reject" method="POST")
              button(type="submit") Reject
